/* ===== 페이지 단위 스케일 (em 기준) ===== */
.tutorial-page {
  position: relative;
  width: 100%;
  min-height: 600px;
  background: rgba(254, 255, 245, 1);
  overflow: hidden;
  font-family: "Noto Sans KR", system-ui, -apple-system, Segoe UI, Roboto,
    sans-serif;
  touch-action: pan-y;
  padding-bottom: max(12px, var(--safe-bottom));

  /* 글씨 크기: 화면 폭에 맞게 비율 조정 (모바일 ~ 데스크탑) */
  font-size: clamp(14px, 2.5vw, 22px);
  cursor: default;
  user-select: none; /* ← 글자 드래그 방지 */
  -webkit-user-select: none; /* 사파리/모바일 */
  -ms-user-select: none; /* 구 IE 엣지 */
  -webkit-touch-callout: none; /* iOS 길게눌러 복사 메뉴 금지 */
}

/* 가로 슬라이더 */
.slider {
  display: flex;
  height: 100%;
  transition: transform 380ms ease;
}
.slide {
  position: relative; /* ★ 각 슬라이드 기준 */
  flex: 0 0 100%;
  min-height: 100svh;
  padding: 0;
  box-sizing: border-box;
  display: block;
  margin-top: 15px;
}

@supports (min-height: 100vh) {
  .tutorial-page,
  .slide {
    min-height: 100vh;
  }
}

/* === 공통 위치 변수 (요소 '중심'이 해당 퍼센트에 오도록) === */
:root {
  --safe-bottom: env(safe-area-inset-bottom, 0px);
  --safe-top: env(safe-area-inset-top, 0px);
  --top-gutter: 15px; /* ← 위 여백 크기(원하면 6~16px로 조절) */
  --top-offset: max(var(--safe-top), var(--top-gutter));
  --pos-title: 12vh;
  --pos-image: 40vh;
  --pos-desc: 65vh;
  --pos-dots: 78svh;
  --pos-footer: 85svh;
  /* iPad Pro 가로 기준 최대 폭 */
  --stage-max: 1366px;

  /* 캐릭터 크기(요청 값) */
  --charScale1: 0.86;
  --charScale2: 0.86;
  --charScale3: 1.22;

  /* 캐릭터 마키: 세트/이동량 (3세트 → 한 스텝 = 33.333…%) */
  --loop-count: 3;
  --loop-step: calc(100% / var(--loop-count)); /* = 33.333…% */
}

/* 제목 */
.title {
  position: absolute;
  top: var(--pos-title);
  left: 50%;
  transform: translate(-50%, -50%);
  margin: 0;
  font-weight: 800;
  font-size: 1.4em;
  color: #2a4b39;
  text-align: center;
}

/* 설명 */
.desc {
  position: absolute;
  top: var(--pos-desc);
  left: 50%;
  transform: translate(-50%, -50%);
  width: min(90%, 40em);
  margin: 0;
  font-size: 0.9em;
  line-height: 1.6;
  text-align: center;
  color: #3a4a3f;
}

/* 이미지 래퍼: 화면 폭 = 100vw, 최대는 iPad Pro 가로폭 */
.image-wrap {
  position: absolute;
  top: var(--pos-image);
  left: 50%;
  transform: translate(-50%, -50%);
  width: min(100vw, var(--stage-max));
  height: 40vh;
  min-height: 13.75em;
  display: flex;
  align-items: center;
  justify-content: center;
}

.hero-img {
  pointer-events: none;
  width: clamp(230px, 80vw, 350px);
  max-width: 100%;
  max-height: 100%;
  display: block;
  object-fit: contain;
  filter: drop-shadow(0 1.125em 1.125em rgba(0, 0, 0, 0.12));
}

/* 2번째(로드맵)만 살짝 축소 */
.roadmap-img {
  transform: scale(0.85);
  transform-origin: center;
  width: clamp(230px, 80vw, 400px);
}

.char-img {
  pointer-events: none;
  width: 8.5em;
  height: auto;
  flex: 0 0 auto;
  display: block;
  filter: drop-shadow(0 0.875em 1em rgba(0, 0, 0, 0.12));
}

/* 인디케이터 */
.dots {
  position: absolute;
  top: calc(var(--pos-dots) - var(--safe-bottom));
  left: 50%;
  transform: translate(-50%, -50%);
  display: flex;
  gap: 0.5em;
}
.dot {
  width: 0.5em;
  height: 0.5em;
  border-radius: 35%;
  border: none;
  background: #d6e7da;
}
.dot.active {
  width: 1.375em;
  background: #40ea87;
}

/* 하단 CTA */
.footer {
  position: absolute;
  top: calc(var(--pos-footer) - var(--safe-bottom));
  left: 50%;
  transform: translate(-50%, -50%);
}
.start-btn {
  /* 더 넓게: 화면 80%까지, 최대 450px */
  width: min(80vw, 450px);
  height: 3.375em;
  border: none;
  border-radius: 0.875em;
  font-weight: 700;
  font-size: 1em;
  cursor: pointer;
}
.start-btn.disabled {
  background: #e9efe9;
  color: #9fb2a6;
}
.start-btn.enabled {
  background: #40ea87;
  color: rgba(65, 96, 76, 1);
}
/* 컴팩트 1: 보통 소형 화면(≤780px 높이)에서 세로 간격 살짝 축소 */
@media (max-height: 915px) {
  :root {
    --pos-title: 9svh;
    --pos-image: 34svh;
    --pos-desc: 59svh;
    --pos-dots: 73svh;
    --pos-footer: 83svh;
  }
  .image-wrap {
    height: 32vh;
  }
  .title {
    font-size: 1.3em;
  }
  .desc {
    font-size: 0.85em;
    line-height: 1.5;
  }
  .start-btn {
    width: min(78vw, 420px);
    height: 2.5em;
  }
}

/* 컴팩트 2: 아주 낮은 화면(≤667px)에서 더 타이트하게 */
@media (max-height: 667px) {
  :root {
    --pos-title: 8svh;
    --pos-image: 31svh;
    --pos-desc: 56svh;
    --pos-dots: 70svh;
    --pos-footer: 80svh;
  }
  .image-wrap {
    height: 29vh;
    min-height: 10.5em;
  }
  .char-marquee-viewport {
    height: calc(7.5em * var(--charScale3) + 1.6em);
  }
  .dots {
    gap: 0.4em;
  }
}

/* 데스크탑(마우스/넓은 화면)에서 CTA 버튼 얇게 */
@media (hover: hover) and (min-width: 1024px) {
  .start-btn {
    /* 데스크탑에서 너무 두꺼워지는 em 스케일을 제한 */
    height: 3em; /* 기존 3.375em → 2.6em(약 22px 글꼴 기준 ~57px) */
    font-size: 0.95em; /* 살짝 줄여 균형 잡기 */
    border-radius: 0.75em; /* 곡률도 살짝 덜 둥글게 */
  }
}

/* 더 넓은 화면(≥1440px)에서는 한 번 더 얇게 */
@media (hover: hover) and (min-width: 1440px) {
  .start-btn {
    height: 2.9em;
    font-size: 0.8em;
  }
}
/* PC(데스크탑)에서만 전체 내용물 430px 고정 */
@media (hover: hover) and (min-width: 1024px) {
  :root {
    --stage-max: 430px;
  }

  .slide {
    flex: 0 0 100% !important;
    width: 100% !important;
    max-width: none !important;
  }

  /* 제목/설명/이미지/푸터만 고정폭 중앙 */
  .title,
  .desc,
  .image-wrap,
  .footer {
    width: var(--stage-max);
    left: 50%;
    transform: translate(-50%, -50%);
    max-width: none;
  }

  /* 캐릭터 줄은 image-wrap 안에서 이미 중앙이므로 추가 설정 불필요 */

  /* dots는 ‘자기 컨텐츠 폭’으로 중앙 정렬(위 공통 목록에서 제외!) */
  .dots {
    width: auto !important;
    left: 50%;
    transform: translate(-50%, -50%) !important;
  }

  .title {
    font-size: clamp(20px, 5vw, 24px) !important;
  }
  .decs {
    font-size: clamp(12px, 2vw, 15px) !important;
  }

  .roadmap-img {
    width: clamp(230px, 80vw, 300px) !important;
  }
}

/* ===== 캐릭터 가로 정렬 + 둥둥(순차) 모션 ===== */
.char-row {
  display: flex;
  justify-content: center;
  align-items: flex-end;
  gap: clamp(0.8em, 3vw, 1.2em); /* 반응형 간격 */
  width: 100%;
  flex-wrap: nowrap; /* 가로 한 줄 고정 */
}

.char-img {
  pointer-events: none;
  height: auto;
  display: block;
  filter: drop-shadow(0 0.875em 1em rgba(0, 0, 0, 0.12));
}

/* PC/모바일 별 크기 조절 */
@media (hover: hover) and (min-width: 1024px) {
  /* 430px 스테이지에 3장 들어가도록 적당한 폭 */
  .char-img {
    width: clamp(90px, 28%, 120px);
  }
  .char3 {
    width: clamp(120px, 28%, 150px) !important;
  }
}
@media (max-width: 1024px) {
  /* 모바일은 조금 더 크게 보이게 */
  .char-img {
    width: clamp(72px, 24vw, 110px);
  }
}

/* 둥둥 모션: 위아래 */
@keyframes bob {
  0% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-8%);
  }
  100% {
    transform: translateY(0);
  }
}
.bob {
  animation: bob 2.1s ease-in-out infinite;
  will-change: transform;
}

/* 왼→가운데→오른쪽 순서로 지연(두·두·둥) */
.char-row .bob:nth-child(1) {
  animation-delay: 0s;
}
.char-row .bob:nth-child(2) {
  animation-delay: 0.16s;
}
.char-row .bob:nth-child(3) {
  animation-delay: 0.32s;
}

/* dots를 정확히 중앙에 */
.dots {
  width: auto !important; /* 콘텐츠 폭만큼만 */
  left: 50%;
  transform: translate(-50%, -50%) !important;
}
